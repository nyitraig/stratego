(this["webpackJsonpstratego-app"]=this["webpackJsonpstratego-app"]||[]).push([[0],{42:function(e,t,n){e.exports=n.p+"static/media/logo.52e53c2a.png"},43:function(e,t,n){e.exports=n(87)},53:function(e,t,n){},83:function(e,t){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var i,a,o=n(0),r=n.n(o),c=n(9),l=n.n(c),s=n(2),u=n(5),d=n(40),f=n(12),m=n(1);!function(e){e[e.NONE=0]="NONE",e[e.SPY=1]="SPY",e[e.SCOUT=2]="SCOUT",e[e.MINER=3]="MINER",e[e.SERGEANT=4]="SERGEANT",e[e.LIEUTENANT=5]="LIEUTENANT",e[e.CAPTAIN=6]="CAPTAIN",e[e.MAJOR=7]="MAJOR",e[e.COLONEL=8]="COLONEL",e[e.GENERAL=9]="GENERAL",e[e.MARSHAL=10]="MARSHAL",e[e.FLAG=-1]="FLAG",e[e.BOMB=98]="BOMB",e[e.UNKNOWN=99]="UNKNOWN"}(i||(i={})),function(e){e.NONE="gray",e.RED="red",e.BLUE="blue"}(a||(a={}));var p,E={player:a.RED,boardSize:6,units:[{team:a.BLUE,unit:i.FLAG,position:{x:0,y:0}},{team:a.BLUE,unit:i.BOMB,position:{x:1,y:0}},{team:a.BLUE,unit:i.BOMB,position:{x:2,y:0}},{team:a.BLUE,unit:i.SPY,position:{x:3,y:0}},{team:a.BLUE,unit:i.SCOUT,position:{x:4,y:0}},{team:a.BLUE,unit:i.SCOUT,position:{x:5,y:0}},{team:a.BLUE,unit:i.MINER,position:{x:0,y:1}},{team:a.BLUE,unit:i.MINER,position:{x:1,y:1}},{team:a.BLUE,unit:i.SERGEANT,position:{x:2,y:1}},{team:a.BLUE,unit:i.CAPTAIN,position:{x:3,y:1}},{team:a.BLUE,unit:i.COLONEL,position:{x:4,y:1}},{team:a.BLUE,unit:i.MARSHAL,position:{x:5,y:1}},{team:a.RED,unit:i.FLAG,position:{x:0,y:4}},{team:a.RED,unit:i.BOMB,position:{x:1,y:4}},{team:a.RED,unit:i.BOMB,position:{x:2,y:4}},{team:a.RED,unit:i.SPY,position:{x:3,y:4}},{team:a.RED,unit:i.SCOUT,position:{x:4,y:4}},{team:a.RED,unit:i.SCOUT,position:{x:5,y:4}},{team:a.RED,unit:i.MINER,position:{x:0,y:5}},{team:a.RED,unit:i.MINER,position:{x:1,y:5}},{team:a.RED,unit:i.SERGEANT,position:{x:2,y:5}},{team:a.RED,unit:i.CAPTAIN,position:{x:3,y:5}},{team:a.RED,unit:i.COLONEL,position:{x:4,y:5}},{team:a.RED,unit:i.MARSHAL,position:{x:5,y:5}}]},b=function(e){return{type:"GAME_STATE_SET_ROOM_ID",payload:{id:e}}},y=function(e,t){return{roomId:null,player:null,currentPlayer:null,winner:null,boardSize:e,isFightInProgress:!1,selectedUnitId:null,attackedUnitId:null,synced:!0,board:Array(Math.pow(e,2)).fill().map((function(t,n){return{id:n,position:{x:n%e,y:Math.floor(n/e)},isAvailable:!1}})),units:t.map((function(e,t){return{id:1e3+t,team:e.team,unit:e.unit,position:e.position,isAttackable:!1,isAlive:!0}})),graveyardRed:Array(t.filter((function(e){return e.team===a.RED})).length).fill().map((function(n,i){return{id:2e3+i,position:{x:i%Math.ceil(t.filter((function(e){return e.team===a.RED})).length/e),y:Math.floor(i/Math.ceil(t.filter((function(e){return e.team===a.RED})).length/e))}}})),graveyardBlue:Array(t.filter((function(e){return e.team===a.BLUE})).length).fill().map((function(n,i){return{id:3e3+i,position:{x:i%Math.ceil(t.filter((function(e){return e.team===a.BLUE})).length/e),y:Math.floor(i/Math.ceil(t.filter((function(e){return e.team===a.BLUE})).length/e))}}}))}},A=y(E.boardSize,E.units),g={player:a.RED,boardSize:6,availableUnits:[{unit:i.FLAG,amount:1},{unit:i.BOMB,amount:2},{unit:i.SPY,amount:1},{unit:i.SCOUT,amount:2},{unit:i.MINER,amount:2},{unit:i.SERGEANT,amount:1},{unit:i.CAPTAIN,amount:1},{unit:i.COLONEL,amount:1},{unit:i.MARSHAL,amount:1}]},O=function(e,t,n){var i=e===a.RED?[t-2,t-1]:[0,1];return{player:e,boardSize:t,board:Array(Math.pow(t,2)).fill().map((function(e,n){return{id:n,position:{x:n%t,y:Math.floor(n/t)},isAvailable:i.includes(Math.floor(n/t))}})),hand:Array(n.reduce((function(e,t){return t.amount+e}),0)).fill().map((function(e,n){return{id:1e3+n,position:{x:n%t,y:Math.floor(n/t)}}})),units:n.map((function(t){return Array(t.amount).fill({team:e,unit:t.unit,isSelected:!1,isInHand:!0})})).flat().map((function(e,n){return Object(m.a)(Object(m.a)({},e),{},{id:2e3+n,position:{x:n%t,y:Math.floor(n/t)}})})),availableRows:i}},h=O(g.player,g.boardSize,g.availableUnits),x=Object(u.c)({gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=function(t,n){e=y(t,n)},o=function(t,n){var a=e.board.find((function(e){return e.id===t})),o=e.units.find((function(e){return e.id===n}));return!(!a||!o)&&(o.unit!==i.FLAG&&o.unit!==i.BOMB&&(o.unit===i.SCOUT?o.position.x===a.position.x&&a.position.y>o.position.y&&0===e.units.filter((function(e){return e.isAlive&&e.position.x===a.position.x&&e.position.y<a.position.y&&e.position.y>o.position.y})).length||o.position.x===a.position.x&&a.position.y<o.position.y&&0===e.units.filter((function(e){return e.isAlive&&e.position.x===a.position.x&&e.position.y>a.position.y&&e.position.y<o.position.y})).length||o.position.y===a.position.y&&a.position.x>o.position.x&&0===e.units.filter((function(e){return e.isAlive&&e.position.y===a.position.y&&e.position.x<a.position.x&&e.position.x>o.position.x})).length||o.position.y===a.position.y&&a.position.x<o.position.x&&0===e.units.filter((function(e){return e.isAlive&&e.position.y===a.position.y&&e.position.x>a.position.x&&e.position.x<o.position.x})).length:o.position.x===a.position.x&&1===Math.abs(o.position.y-a.position.y)||o.position.y===a.position.y&&1===Math.abs(o.position.x-a.position.x)))},r=function(t,n){var i=e.units.find((function(e){return e.id===t})),a=e.units.find((function(e){return e.id===n}));if(!i||!a||i.team===a.team||!i.isAlive)return!1;var r=e.board.find((function(e){return e.position.x===i.position.x&&e.position.y===i.position.y}));return!!r&&o(r.id,a.id)},c=function(t){if(e.player===e.currentPlayer){var n=e.units.find((function(e){return e.id===t}));if(n&&!e.isFightInProgress)if(n.team!==e.player&&n.isAlive&&n.isAttackable){var i=e.units.find((function(t){return t.id===e.selectedUnitId}));if(!i)return;e=Object(m.a)(Object(m.a)({},e),{},{isFightInProgress:!0,attackedUnitId:n.id,units:e.units.map((function(t){return t.id===e.selectedUnitId?Object(m.a)(Object(m.a)({},t),{},{position:{x:n.position.x+String(i.position.x).localeCompare(n.position.x),y:n.position.y+String(i.position.y).localeCompare(n.position.y)}}):Object(m.a)(Object(m.a)({},t),{},{isAttackable:!1})})),synced:!1})}else n.team===e.player&&e.selectedUnitId===n.id?e=Object(m.a)(Object(m.a)({},e),{},{selectedUnitId:null,board:e.board.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAvailable:!1})})),units:e.units.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAttackable:!1})}))}):n.team===e.player&&e.selectedUnitId!==n.id&&(e=Object(m.a)(Object(m.a)({},e),{},{selectedUnitId:v.id,board:e.board.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAvailable:o(e.id,n.id)})})),units:e.units.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAttackable:r(e.id,n.id)})}))}))}},l=function(t,n){var i=e.units.find((function(e){return e.id===t})),a=e.board.find((function(e){return e.id===n}));i&&a&&a.isAvailable&&(e=Object(m.a)(Object(m.a)({},e),{},{units:e.units.map((function(e){return e.id===i.id?Object(m.a)(Object(m.a)({},e),{},{position:a.position}):Object(m.a)(Object(m.a)({},e),{},{isAttackable:!1})})),board:e.board.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAvailable:!1})})),selectedUnitId:null}))},s=function(t){if(e.player===e.currentPlayer){var n=e.units.find((function(t){return t.id===e.selectedUnitId})),i=e.board.find((function(e){return e.id===t}));n&&i&&i.isAvailable&&!e.isFightInProgress&&(l(e.selectedUnitId,t),e.currentPlayer=e.currentPlayer===a.RED?a.BLUE:a.RED,e.synced=!1)}},u=function(){var t=e.units.filter((function(e){return e.isAlive}));!t||t.every((function(e){return e.unit===i.FLAG||e.unit===i.BOMB}))?e.winner=a.NONE:t.find((function(e){return e.team===a.RED&&e.unit===i.FLAG}))?t.find((function(e){return e.team===a.BLUE&&e.unit===i.FLAG}))||(e.winner=a.RED):e.winner=a.BLUE},d=function(t){var n=e.units.find((function(e){return e.id===t}));if(n&&n.isAlive){var i=e.units.filter((function(e){return e.team===n.team})).length,a=e.units.filter((function(e){return e.team===n.team&&!e.isAlive})).length;e=Object(m.a)(Object(m.a)({},e),{},{units:e.units.map((function(n){return n.id===t?Object(m.a)(Object(m.a)({},n),{},{isAlive:!1,isAttackable:!1,position:{x:a%Math.ceil(i/e.boardSize),y:Math.floor(a/Math.ceil(i/e.boardSize))}}):n}))})}},p=function(){var t=e.units.find((function(t){return t.id===e.attackedUnitId})),n=e.units.find((function(t){return t.id===e.selectedUnitId}));if(t&&n&&e.isFightInProgress){if(t.unit<n.unit||t.unit===i.BOMB&&n.unit===i.MINER||t.unit===i.MARSHAL&&n.unit===i.SPY){var o=e.board.find((function(e){return e.position.x===t.position.x&&e.position.y===t.position.y}));d(t.id),l(n.id,o.id)}else t.unit>n.unit||d(t.id),d(n.id);u(),e=Object(m.a)(Object(m.a)({},e),{},{units:e.units.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAttackable:!1})})),board:e.board.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAvailable:!1})})),isFightInProgress:!1,selectedUnitId:null,attackedUnitId:null,currentPlayer:e.currentPlayer===a.RED?a.BLUE:a.RED,synced:!1})}},b=function(t){e=Object(m.a)(Object(m.a)({},e),{},{roomId:t})},g=function(t){e=Object(m.a)(Object(m.a)({},e),{},{player:1===t?a.RED:a.BLUE})},O=function(t){var n=Math.max.apply(Math,Object(f.a)(e.units.map((function(e){return e.id}))).concat([1e3])),i=Math.max.apply(Math,Object(f.a)(e.graveyardRed.map((function(e){return e.id}))).concat([2e3])),o=Math.max.apply(Math,Object(f.a)(e.graveyardBlue.map((function(e){return e.id}))).concat([3e3]));e=Object(m.a)(Object(m.a)({},e),{},{units:e.units.concat(t.map((function(e,t){return Object(m.a)(Object(m.a)({},e),{},{id:n+t+1,isAttackable:!1,isAlive:!0})}))),graveyardRed:e.graveyardRed.concat(t.filter((function(e){return e.team===a.RED})).map((function(e,t){return{id:i+t+1}}))),graveyardBlue:e.graveyardBlue.concat(t.filter((function(e){return e.team===a.BLUE})).map((function(e,t){return{id:o+t+1}})))}),e=Object(m.a)(Object(m.a)({},e),{},{graveyardRed:e.graveyardRed.map((function(t,n){return Object(m.a)(Object(m.a)({},t),{},{position:{x:n%Math.ceil(e.graveyardRed.length/e.boardSize),y:Math.floor(n/Math.ceil(e.graveyardRed.length/e.boardSize))}})})),graveyardBlue:e.graveyardBlue.map((function(t,n){return Object(m.a)(Object(m.a)({},t),{},{position:{x:n%Math.ceil(e.graveyardBlue.length/e.boardSize),y:Math.floor(n/Math.ceil(e.graveyardBlue.length/e.boardSize))}})}))})},h=function(t){if(e.currentPlayer)e=Object(m.a)(Object(m.a)({},t),{},{player:e.player,synced:!0});else{var n=t.units.filter((function(t){return t.team!==e.player}));O(n),n.length&&(e=Object(m.a)(Object(m.a)({},e),{},{currentPlayer:a.RED}))}};if(e.winner)return e;var x=t.type,v=t.payload;switch(x){case"GAME_STATE_NEW_GAME":n(v.boardSize,v.units);break;case"GAME_STATE_MOVE_SELECTED_UNIT_ON_BOARD":s(v.id);break;case"GAME_STATE_HANDLE_UNIT_CLICK":c(v.id);break;case"GAME_STATE_CONCLUDE_FIGHT":p();break;case"GAME_STATE_SET_ROOM_ID":n(E.boardSize,[]),b(v.id);break;case"GAME_STATE_SET_PLAYER":g(v.player);break;case"GAME_STATE_ADD_UNITS":O(v.units);break;case"GAME_STATE_UPDATE_STATE":h(v.state)}return e},prepareState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=function(t){var n=e.board.find((function(e){return e.id===t})),i=e.units.find((function(e){return!e.isInHand&&e.position&&e.position.x===n.position.x&&e.position.y===n.position.y}));return e.availableRows.includes(n.position.y)&&!i},i=t.type,a=t.payload;if("PREPARE_STATE_ACTIVATE_UNIT"===i)return Object(m.a)(Object(m.a)({},e),{},{units:e.units.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isSelected:e.id===a.id&&!e.isSelected})}))});if("PREPARE_STATE_MOVE_SELECTED_UNIT_ON_BOARD"===i){var o=e.board.find((function(e){return e.id===a.id})),r=e.units.find((function(e){return e.isSelected}));return o.isAvailable&&r?(e.units=e.units.map((function(e){return e.id===r.id?Object(m.a)(Object(m.a)({},e),{},{isSelected:!1,position:o.position,isInHand:!1}):e})),e.board=e.board.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAvailable:n(e.id)})})),Object(m.a)({},e)):e}if("PREPARE_STATE_MOVE_SELECTED_UNIT_ON_HAND"===i){var c=e.hand.find((function(e){return e.id===a.id})),l=e.units.find((function(e){return e.isSelected}));return l?(e.units=e.units.map((function(e){return e.id===l.id?Object(m.a)(Object(m.a)({},e),{},{isSelected:!1,position:c.position,isInHand:!0}):e})),e.board=e.board.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAvailable:n(e.id)})})),Object(m.a)({},e)):e}return"PREPARE_STATE_NEW_GAME"===i?e=O(a.player,g.boardSize,g.availableUnits):e}}),v=n(11);n(53);!function(e){e[e.MAIN_PAGE=0]="MAIN_PAGE",e[e.WAITING_FOR_SECOND_PLAYER=1]="WAITING_FOR_SECOND_PLAYER",e[e.PREPARE_GAME=2]="PREPARE_GAME",e[e.IN_GAME=3]="IN_GAME"}(p||(p={}));var N,S=n(41),_=n.n(S),j=null,R=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){j.emit("sync-state",e.roomId,e,t,(function(e){"ok"!==e.status&&console.error("error while syncing state: ".concat(e.message))}))}},T=function(e){return function(t){j.emit("leave-room",e,(function(e){"ok"!==e.status&&console.error("error while leaving room: ".concat(e.message))}))}},M=function(e){return e.gameState},I=n(42),P=n.n(I),w=function(e){var t=e.onPageChange,n=Object(s.b)(),i=Object(s.c)(M),a=Object(o.useState)(""),c=Object(v.a)(a,2),l=c[0],u=c[1];return Object(o.useEffect)((function(){i.player&&0===i.units.length&&(n({type:"PREPARE_STATE_NEW_GAME",payload:{player:i.player}}),t(p.PREPARE_GAME))})),r.a.createElement("div",{className:"flex h-screen bg-gray-800"},r.a.createElement("div",{className:"flex flex-col m-auto",style:{width:330}},r.a.createElement("img",{src:P.a,alt:""}),r.a.createElement("button",{className:"mx-4 mt-6 bg-yellow-600 hover:bg-yellow-700 text-white font-bold text-xl py-2 px-4 rounded",onClick:function(){return t(p.WAITING_FOR_SECOND_PLAYER)}},"\xdaj j\xe1t\xe9k"),r.a.createElement("div",{className:"mx-4 mt-2 flex flex-row"},r.a.createElement("input",{className:"w-1/2 mr-2 bg-transparent focus:bg-gray-700 border border-yellow-600 placeholder-yellow-700 focus:placeholder-yellow-500 text-yellow-600 font-bold rounded py-2 px-4 block appearance-none leading-normal",placeholder:"azonosit\xf3",onInput:function(e){return u(e.target.value)}}),r.a.createElement("button",{className:"bg-yellow-600 text-white font-bold text-xl py-2 px-4 rounded ".concat(l?"hover:bg-yellow-700":"opacity-50 cursor-not-allowed"),style:l?{}:{outline:"none"},onClick:function(){""!==l&&n(function(e){return function(t){j.emit("join-room",e,(function(e){"ok"!==e.status&&console.error("error while joining room: ".concat(e.message))}))}}(l))}},"Csatlakoz\xe1s")),r.a.createElement("button",{className:"mx-4 mt-2 bg-yellow-600 hover:bg-yellow-700 text-white font-bold text-xl py-2 px-4 rounded",onClick:function(){return window.location.href="http://www.ketaklub.hu/letoltes/Stratego%20Aoriginal%20Piatnik.pdf"}},"Szab\xe1lyok")))},U=(n(86),function(e){var t=e.onPageChange,n=Object(s.b)(),i=Object(s.c)(M);return Object(o.useEffect)((function(){i.roomId||n((function(e){j.emit("create-room",(function(t){"ok"===t.status?e(b(t.roomId)):console.error("error while creating room: ".concat(t.message))}))})),i.player&&0===i.units.length&&t(p.PREPARE_GAME),i.currentPlayer&&t(p.IN_GAME)})),r.a.createElement("div",{className:"flex flex-col h-screen bg-gray-800"},r.a.createElement("div",{className:"flex flex-col m-auto items-center"},r.a.createElement("div",{className:"lds-ellipsis mt-64"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement("div",{className:"text-white"},"V\xe1rakoz\xe1s az ellenf\xe9lre ..."),!i.player&&r.a.createElement("div",{className:"text-white"},"Szoba azonos\xedt\xf3: ",i.roomId)),r.a.createElement("div",{className:"flex justify-center mb-32"},r.a.createElement("button",{className:"mt-20 bg-transparent hover:bg-yellow-700 text-yellow-600 font-bold hover:text-white py-2 px-4 border border-yellow-600 hover:border-transparent rounded",onClick:function(){n(T(i.roomId)),t(p.MAIN_PAGE)}},"Men\xfc")))}),k=function(e){return e.prepareState},L=function(e){var t=e.gameState,n=e.onUnitClick,o=e.onBoardClick,c=e.onHandClick,l=e.onReady;return r.a.createElement("div",{className:"flex flex-col items-center"},r.a.createElement("div",{className:"text-white mb-6"},"El\u0151k\xe9sz\xfcl\xe9s - ",t.player===a.RED?"Piros":"K\xe9k"," csapat"),r.a.createElement("div",{className:"relative",style:{width:"".concat(3*t.boardSize,"rem"),height:"".concat(3*(t.boardSize+Math.ceil(t.units.length/t.boardSize))+4,"rem")}},t.board.map((function(e){return r.a.createElement("div",{className:"absolute z-0 w-12 h-12 select-none flex items-center justify-center",style:{left:"".concat(3*e.position.x,"rem"),top:"".concat(3*e.position.y,"rem")},onClick:function(){return o(e.id)},key:e.id},r.a.createElement("div",{className:"bg-".concat(e.isAvailable?"green":"gray","-500 w-10 h-10 rounded flex items-center justify-center transition duration-300 ease-in-out")}))})),r.a.createElement("div",{className:"absolute text-white text-sm text-center",style:{width:"".concat(3*t.boardSize,"rem"),top:"".concat(3*t.boardSize+2,"rem")}},"El\xe9rhet\u0151 egys\xe9gek"),t.hand.map((function(e){return r.a.createElement("div",{className:"absolute z-0 w-12 h-12 select-none flex items-center justify-center",style:{left:"".concat(3*e.position.x,"rem"),top:"".concat(3*e.position.y+3*t.boardSize+4,"rem")},onClick:function(){return c(e.id)},key:e.id},r.a.createElement("div",{className:"bg-transparent w-10 h-10 rounded flex items-center justify-center transition duration-300 ease-in-out border-solid border-2 border-gray-500"}))})),t.units.map((function(e){return r.a.createElement("div",{className:"absolute z-10 w-12 h-12 select-none flex items-center justify-center transition-all duration-300 ease-in-out",style:{left:"".concat(3*e.position.x,"rem"),top:"".concat(3*e.position.y+(e.isInHand?3*t.boardSize+4:0),"rem")},onClick:function(){return n(e.id)},key:e.id},r.a.createElement("div",{className:"bg-".concat(e.team,"-").concat(e.isSelected?300:500," w-10 h-10 rounded flex items-center justify-center")},e.unit===i.BOMB?"\ud83d\udca3":e.unit===i.FLAG?"\ud83d\udea9":e.unit))})),r.a.createElement("div",{className:"absolute flex items-center justify-center",style:{left:"".concat(3*t.boardSize+2,"rem"),top:"".concat(3*(t.boardSize+Math.ceil(t.units.length/t.boardSize)/2)+2.5,"rem")}},r.a.createElement("button",{className:"bg-yellow-600 text-white font-bold text-xl py-2 px-4 rounded ".concat(t.units.some((function(e){return e.isInHand}))?"opacity-50 cursor-not-allowed":"hover:bg-yellow-700"),style:t.units.some((function(e){return e.isInHand}))?{outline:"none"}:{},onClick:l},"Tov\xe1bb"))))},C=function(e){var t=e.onPageChange,n=Object(s.c)(M),i=Object(s.c)(k),a=Object(s.b)();return Object(o.useEffect)((function(){n.player&&n.units.filter((function(e){return e.team===n.player})).length>0&&(a(R(n)),t(p.WAITING_FOR_SECOND_PLAYER))})),r.a.createElement("div",{className:"flex h-screen bg-gray-800"},r.a.createElement("div",{className:"flex flex-col m-auto items-center"},r.a.createElement(L,{gameState:i,onUnitClick:function(e){return a(function(e){return{type:"PREPARE_STATE_ACTIVATE_UNIT",payload:{id:e}}}(e))},onBoardClick:function(e){return a(function(e){return{type:"PREPARE_STATE_MOVE_SELECTED_UNIT_ON_BOARD",payload:{id:e}}}(e))},onHandClick:function(e){return a(function(e){return{type:"PREPARE_STATE_MOVE_SELECTED_UNIT_ON_HAND",payload:{id:e}}}(e))},onReady:function(){i.units.some((function(e){return e.isInHand}))||a({type:"GAME_STATE_ADD_UNITS",payload:{units:i.units}})}})))},B=function(e){var t=e.gameState,n=e.onUnitClick,o=e.onBoardClick,c=e.onMenuButtonClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-white mb-6"},!t.winner&&"".concat(t.currentPlayer===a.RED?"Piros":"K\xe9k"," j\xe1t\xe9kos k\xf6vetkezik"),t.winner===a.RED&&"Piros j\xe1t\xe9kos gy\u0151z\xf6tt!",t.winner===a.BLUE&&"K\xe9k j\xe1t\xe9kos gy\u0151z\xf6tt!",t.winner===a.NONE&&"D\xf6ntetlen!"),r.a.createElement("div",{className:"relative",style:{width:"".concat(3*t.boardSize,"rem"),height:"".concat(3*t.boardSize,"rem")}},t.board.map((function(e){return r.a.createElement("div",{className:"absolute z-0 w-12 h-12 select-none flex items-center justify-center",style:{left:"".concat(3*e.position.x,"rem"),top:"".concat(3*e.position.y,"rem")},onClick:function(){return o(e.id)},key:e.id},r.a.createElement("div",{className:"bg-".concat(e.isAvailable&&!t.isFightInProgress?"green":"gray","-500 w-10 h-10 rounded flex items-center justify-center")}))})),t.graveyardBlue.map((function(e){return r.a.createElement("div",{className:"absolute z-0 w-12 h-12 select-none flex items-center justify-center",style:{left:"".concat(3*-(Math.ceil(t.graveyardBlue.length/t.boardSize)-e.position.x)-2,"rem"),top:"".concat(3*e.position.y,"rem")},key:e.id},r.a.createElement("div",{className:"bg-blue-800 bg-opacity-25 w-10 h-10 rounded flex items-center justify-center transition duration-300 ease-in-out border-solid border-2 border-gray-500"}))})),t.graveyardRed.map((function(e){return r.a.createElement("div",{className:"absolute z-0 w-12 h-12 select-none flex items-center justify-center",style:{left:"".concat(3*(t.boardSize+e.position.x)+2,"rem"),top:"".concat(3*e.position.y,"rem")},key:e.id},r.a.createElement("div",{className:"bg-red-800 bg-opacity-25 w-10 h-10 rounded flex items-center justify-center transition duration-300 ease-in-out border-solid border-2 border-gray-500"}))})),t.units.map((function(e){return r.a.createElement("div",{className:"absolute z-10 w-12 h-12 select-none flex items-center justify-center ".concat(e.isAlive?"transition-all duration-300 ease-in-out":""),style:{left:"".concat(e.team!==a.RED||e.isAlive?e.team!==a.BLUE||e.isAlive?3*e.position.x:3*-(Math.ceil(t.graveyardBlue.length/t.boardSize)-e.position.x)-2:3*(t.boardSize+e.position.x)+2,"rem"),top:"".concat(3*e.position.y,"rem")},onClick:function(){return n(e.id)},key:e.id},r.a.createElement("div",{className:"bg-".concat(e.team,"-").concat(e.id===t.selectedUnitId?300:500," w-10 h-10 rounded flex items-center justify-center\n                                       ").concat(!t.isFightInProgress&&e.isAttackable?"border-solid border-2 border-yellow-400 border-opacity-75":"","\n                                       ").concat(t.isFightInProgress&&e.id===t.attackedUnitId?"border-solid border-2 border-".concat(e.team===a.RED?a.BLUE:a.RED,"-400 border-opacity-75"):"")},!t.winner&&e.isAlive&&e.team!==t.player&&t.attackedUnitId!==e.id&&t.selectedUnitId!==e.id?"?":e.unit===i.BOMB?"\ud83d\udca3":e.unit===i.FLAG?"\ud83d\udea9":e.unit))}))),t.winner&&r.a.createElement("button",{className:"bg-yellow-600 text-white font-bold text-xl py-2 px-4 rounded hover:bg-yellow-700 mt-6",style:t.units.some((function(e){return e.isInHand}))?{outline:"none"}:{},onClick:c},"Men\xfc"))},D=function(e){var t=e.onPageChange,n=Object(s.b)(),i=Object(s.c)(M);return Object(o.useEffect)((function(){i.synced||n(R(i)),i.isFightInProgress&&setTimeout((function(){n({type:"GAME_STATE_CONCLUDE_FIGHT",payload:null})}),3e3),i.winner&&n(T(i.roomId))})),r.a.createElement("div",{className:"flex h-screen bg-gray-800"},r.a.createElement("div",{className:"flex flex-col m-auto items-center"},r.a.createElement(B,{gameState:i,onUnitClick:function(e){return n(function(e){return{type:"GAME_STATE_HANDLE_UNIT_CLICK",payload:{id:e}}}(e))},onBoardClick:function(e){return n(function(e){return{type:"GAME_STATE_MOVE_SELECTED_UNIT_ON_BOARD",payload:{id:e}}}(e))},onMenuButtonClick:function(){return t(p.MAIN_PAGE)}})))},G=function(){var e=Object(s.b)(),t=Object(o.useState)(p.MAIN_PAGE),n=Object(v.a)(t,2),i=n[0],a=n[1];switch(Object(o.useEffect)((function(){e((function(e){(j=_()("http://webprogramozas.inf.elte.hu:3030")).on("room-is-full",(function(t){console.log("room-is-full",t),e(b(t.roomId)),e({type:"GAME_STATE_SET_PLAYER",payload:{player:t.player}})})),j.on("player-joined",(function(e){console.log("player-joined",e)})),j.on("state-changed",(function(t){e({type:"GAME_STATE_UPDATE_STATE",payload:{state:t.state}}),console.log("state-changed",t)})),j.on("action-sent",(function(e){console.log("player-left",e)})),j.on("player-left",(function(e){console.log("player-left",e)}))}))}),[e]),i){case p.MAIN_PAGE:return r.a.createElement(w,{onPageChange:a});case p.WAITING_FOR_SECOND_PLAYER:return r.a.createElement(U,{onPageChange:a});case p.PREPARE_GAME:return r.a.createElement(C,{onPageChange:a});case p.IN_GAME:return r.a.createElement(D,{onPageChange:a});default:return r.a.createElement(w,{onPageChange:a})}},z=Object(u.d)(x,N,Object(u.a)(d.a));l.a.render(r.a.createElement(s.a,{store:z},r.a.createElement(G,null)),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.1f01e38c.chunk.js.map